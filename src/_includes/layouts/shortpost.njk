---
layout: layouts/default.njk
---
<article class="mx-auto max-w-2xl">

  <!-- Back link -->
  <nav class="mb-6">
    <a href="/shortposts/"
       class="inline-flex items-center text-sm hover:underline"
       style="color:#1D2D50">
      â† ZurÃ¼ck zu den Shortposts
    </a>
  </nav>

  <!-- Post container -->
  <div class="rounded-sm border border-slate-200 bg-[#F9F9F9] shadow-sm">

    <!-- Header / meta -->
    <header class="px-6 py-4 border-b border-slate-200">
      <time datetime="{{ page.date.toISOString() }}"
            class="text-xs font-medium tracking-wide uppercase"
            style="color:#1D2D50">
        {{ page.date.toISOString().slice(0,16).replace("T"," ") }}
      </time>
    </header>

    <!-- Content -->
    <div class="px-6 py-6 prose prose-slate max-w-none text-slate-800">
      {{ content | safe }}
    </div>

    <!-- Divider -->
    <hr class="mx-6 mb-6 border-t border-slate-200" />


{# --------------------------------
   Webmentions for this shortpost
--------------------------------- #}

  {% set pageUrl = 'https://inside-the-dugout.de' + page.url %}
  {% set mentionsByTarget = webmention.children | groupBy("wm-target") %}
  {% set pageMentions = mentionsByTarget[pageUrl] %}

  {% set likes = 0 %}
  {% set reposts = 0 %}
  {% set replies = 0 %}

  {% if pageMentions %}
    {% for wm in pageMentions %}
      {% if wm["wm-property"] == "like-of" %}
        {% set likes = likes + 1 %}
      {% elif wm["wm-property"] == "repost-of" %}
        {% set reposts = reposts + 1 %}
      {% elif wm["wm-property"] == "in-reply-to" %}
        {% set replies = replies + 1 %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% if likes > 0 or reposts > 0 or replies > 0 %}
  <section class="px-6 pb-4 text-sm text-slate-700">
    <strong>Social Interactions:</strong>
    {% if likes > 0 %}â¤ï¸ Likes: {{ likes }}{% endif %}
    {% if reposts > 0 %} | ğŸ” Shares: {{ reposts }}{% endif %}
    {% if replies > 0 %} | ğŸ’¬ Kommentare: {{ replies }}{% endif %}
  </section>
  {% endif %}

  {% if pageMentions and replies > 0 %}
  <section class="px-6 pt-6 pb-8 border-t border-slate-200">
    <h2 class="text-base font-semibold mb-6">Diskussion</h2>
    â€¦ replies â€¦
  </section>
  {% endif %}
  </div>

</article>
